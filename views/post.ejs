<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <title>CGN | POST#<%= post.id %></title>
    <style>

    </style>
</head>

<style> 
    .img-fluid{
        border-radius: 15px;
    }

    @font-face {
                font-family: 'Montserrat';
                font-weight: 100;
                font-display: swap;
                src: url('fonts/montserrat/Montserrat-SemiBold.ttf');
        }

    .text{
        word-break: break-all;
        font-family: 'Montserrat';
    }

    .author{
        font-size: 3vh;
    }

    .date{
      color:gray;
      font-weight: 300;
    }

    @media screen and (max-width: 1980px) {
      .newInput{
      word-break: break-all;
      font-family: 'Montserrat';
      border-width:1px;
      height: 3vw;
      border-radius: 15px;
      width: 20vw;
      }
   }

   .links{
     color:gray;
     font-weight: 400;
     text-decoration: none;
   }
      
    @media screen and (max-width: 700px) {
      .newInput{
      word-break: break-all;
      font-family: 'Montserrat';
      height: 10vw;
      border-radius: 15px;
      width: 40vw;
      }
    }

    .button{
      font-family: 'Montserrat';
      background: black;
    }
    
    .button:hover{
      color:white;
      background-color:black;
      transform: translateY(-6px);
    }

</style>

<body class="bg-dark" >
  <div class="container">
    <header class="bg-dark text-white text">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a class="navbar-brand" href="/"><img class="img-fluid" style="border-radius:10px" src="http://cybergamenews.ru/icon.png" width="200" height="100" alt=""></a>
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="/" class="nav-link px-2 text-secondary">Главная</a></li>
              <li><a href="#" class="nav-link px-2 text-white">Скидки</a></li>
              <li><a href="/posts/" class="nav-link active px-2 text-white">Обзоры</a></li>
            </ul>
            <div class="text-end">
            <%if (req.session.secret_id) { %>
              <div class="dropdown text-end">
                <a href="#" class="d-block link-light text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                  <img src=" <%= image %> " alt="mdo" width="32" height="32" class="rounded-circle">
                </a>
                <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser1">
                    <li><a class="dropdown-item" href="/settings">Настройки</a></li>
                    <li><a class="dropdown-item" href="/profile/<%=user_id%>">Профиль</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="/leave">Выйти</a></li>
                </ul>
              </div>
              <% }else{ %>
                
                <a href="/auth/login" type="submit" class="btn btn-outline-light me-2" >Войти</a>
                <a href="/auth/regist" type="submit" class="btn btn-warning">Зарегистрироватся</a>
                <%}%>
            </div>
          </div>
        </div>
      </header>

    <%if (!editMode) {%>
      <%if (post.photo2) { %>
        <div class="bg-white container text-dark" style="margin-bottom:2.5vw; border-radius: 15px; margin-top:2vw; padding-top: 1vw; padding-left: 1vw;">
                    <h1 style="position: absolute; font-family: 'Montserrat'; font-weight: bold;"><%= post.title %></h1>
                    <h1 style="position: relative; text-align: right; font-family: 'Montserrat'; font-weight:400; font-size:2.15vw; color:gray;">-<a class="author" style="color:gray;" href="/profile/<%= user.user_id %>"><%= user.username %></a> 
                    <span class="date" style="font-size:2vw;">(<%= date %>)</span>  
                    </h1>    
                    <h4 class="text sdesc"><%= post.short_desc %></h4>              
                    <hr style="height: 2.5px; color:#212529;">    
                    <img class="img-fluid" src=<%= post.photo_url %> style='width:80%'>
                    <hr style="height: 2.5px; color:#212529;">              
                    <h4 class="text"><%= post.text %></h4>
                    <hr style="height: 2.5px; color:#212529;"> 
                    <img class="img-fluid" src=<%= post.photo2 %> style='width:80%; padding-bottom:1vw;'>    
                    <hr style="height: 2.5px; margin:0; margin-bottom:1vw; color:#212529;"> 
                    <p><a class="links" href="/posts/edit/<%= post.id %>">Изменить</a></p>
                    <p style="padding-bottom:2vw;"><a class="links" href="/posts/delete/<%= post.id %>">Удалить</a></p>
        </div>

      <% }else{ %>
        <div class="bg-white container text-dark" style="margin-bottom:2.5vw; border-radius: 15px; margin-top:2vw; padding-top: 1vw; padding-left: 1vw;">
          <h1 style="position: absolute; font-family: 'Montserrat'; font-weight: bold;"><%= post.title %></h1>
          <h1 style="position: relative; text-align: right; font-family: 'Montserrat'; font-weight:400; font-size:2.15vw; color:gray;">-<a class="author" style="color:gray;" href="/profile/<%= user.user_id %>"><%= user.username %></a> 
          <span class="date" style="font-size:2vw;">(<%= date %>)</span>  
          </h1> 
          <h4 class="text sdesc"><%= post.short_desc %></h4>                 
          <hr style="height: 2.5px; color:#212529;">    
          <img class="img-fluid" src=<%= post.photo_url %> style='width:80%'>
          <hr style="height: 2.5px; color:#212529;">              
          <h4 class="text"><%= post.text %></h4>
          <hr style="height: 2.5px; margin:0; margin-bottom:1vw; color:#212529;"> 
 
          <p><a class="links" href="/posts/edit/<%= post.id %>">Изменить</a></p>
          <p style="padding-bottom:2vw;"><a class="links" href="/posts/delete/<%= post.id %>">Удалить</a></p>
      </div>
      <%}%> 
  <% }else{ %>

    <form method="post" action="/posts/edits/<%= post.id%>">
      <%if (post.photo2) { %>
        <div class="bg-white container text-dark" style="margin-bottom:2.5vw; border-radius: 15px; margin-top:2vw; padding-top: 1vw; padding-left: 1vw;">
                    <h1 class="toInput title" style=" font-family: 'Montserrat'; font-weight: bold;"><%= post.title %></h1>
                    <h1 style="position: relative; text-align: right; font-family: 'Montserrat'; font-weight:400; font-size:2.15vw; color:gray;">-<a class="author" style="color:gray;" href="/profile/<%= user.user_id %>"><%= user.username %></a> 
                    <span class="date" style="font-size:2vw;">(<%= date %>)</span>  
                    </h1>  
                    <h4 class="text toInput sdesc"><%= post.short_desc %></h4>                
                    <hr style="height: 2.5px; color:#212529;">    
                    <img class="img-fluid" src=<%= post.photo_url %> style='width:80%'>
                    <hr style="height: 2.5px; color:#212529;">              
                    <h4 class="text toInput title desc"><%= post.text %></h4>
                    <hr style="height: 2.5px; color:#212529;"> 
                    <img class="img-fluid" src=<%= post.photo2 %> style='width:80%; padding-bottom:1vw;'>    
        </div>

      <% }else{ %>
        <div class="bg-white container text-dark" style="margin-bottom:2.5vw; border-radius: 15px; margin-top:2vw; padding-top: 1vw; padding-left: 1vw;">
          <h1 class='toInput title' style=" font-family: 'Montserrat'; font-weight: bold;"><%= post.title %></h1>
          <h1 style="position: relative; text-align: right; font-family: 'Montserrat'; font-weight:400; font-size:2.15vw; color:gray;">-<a class="author" style="color:gray;" href="/profile/<%= user.user_id %>"><%= user.username %></a> 
          <span class="date" style="font-size:2vw;">(<%= date %>)</span>  
          </h1>    
          <h4 class="text toInput sdesc"><%= post.short_desc %></h4>                  
          <hr style="height: 2.5px; color:#212529;">    
          <img class="img-fluid" src=<%= post.photo_url %> style='width:80%'>
          <hr style="height: 2.5px; color:#212529;">              
          <h4 class="text toInput desc"><%= post.text %></h4>
          <hr style="height: 2.5px; color:#212529;"> 
        </div>
      <%}%>
      <button type="submit" class="btn bg-white button" style="display: none; border-radius: 15px;">Сохранить</button>
    </form>
  <%}%> 
  </div>
  </div>

  <script>
    var i = 'inputA';
    $('.toInput').click(function(){
      
      $('.button').css('display', 'flex')

      if($(this).hasClass('desc')){
        $(this).replaceWith("<input name='desc' class='newInput desc' value='" + $(this).text() + "'>");
      } 

      if($(this).hasClass('title')){
        $(this).replaceWith("<input name='title' class='newInput title' value='" + $(this).text() + "'>");
      }
      
      if($(this).hasClass('sdesc')){
        $(this).replaceWith("<input name='sdesc' class='newInput sdesc' value='" + $(this).text() + "'>");
      }
    });
  </script>

</body>
</html>